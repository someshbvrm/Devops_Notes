
---

# 🐳 Docker Guide for Ubuntu

---

## 1️⃣ Installing Docker

```bash
sudo apt update
sudo apt install docker.io -y

# Check Docker service status
sudo service docker status

# Enable Docker to start at boot
sudo systemctl enable docker

# Verify Docker installation
sudo docker info
```

**Optional:** Add `ubuntu` user to Docker group to run Docker without `sudo`:

```bash
sudo usermod -aG docker ubuntu
# Then log out and log in again
```

For help:

```bash
docker --help
```

---

## 2️⃣ Docker Folder Structure

All Docker data is stored under:

```
/var/lib/docker/
│
├── overlay2/      # Image & container layer data
├── containers/    # Metadata for running/stopped containers
├── image/         # Image metadata
├── volumes/       # Named & anonymous volumes
├── networks/      # Network configurations
└── tmp/           # Temporary files
```

> When you pull an image (e.g., `docker pull ubuntu:latest`), its layers end up in `/var/lib/docker/overlay2/`.

---

## 3️⃣ Working with Images

### Pull Images

```bash
sudo docker pull hello-world         # Pull latest
sudo docker pull hello-world:9       # Pull specific version
sudo docker pull tomcat:latest       # Example: Tomcat image
```

### List Images

```bash
sudo docker images          # Full details
sudo docker images -q       # Only image IDs
```

### Search Images on Docker Hub

```bash
sudo docker search tomcat
```

---

## 4️⃣ Containers: Create & Run

### Create a Container

```bash
docker create --name mytomcat tomcat:latest
```

### Run a Container (Pull + Create + Start)

```bash
docker run --name mytomcat1 -p 8081:8080 tomcat:latest
```

> 🔹 Port mapping: `-p <host_port>:<container_port>`
> Example: Internal container port `8080`, external host port `8081`. External ports must be unique.

### List Containers

```bash
sudo docker ps           # Running containers
sudo docker ps -a        # All containers
sudo docker ps -aq       # Only container IDs
```

---

## 5️⃣ Container Lifecycle

```bash
# Start
sudo docker start mytomcat1

# Stop
sudo docker stop mytomcat1

# Restart
sudo docker restart mytomcat1
```

### Remove Containers & Images

```bash
# Remove container
sudo docker rm mytomcat1
sudo docker rm tomcat2 -f      # Force removal

# Remove all stopped containers
sudo docker container prune

# Remove dangling containers (unused)
docker rm $(docker ps -aq -f status=exited -f status=created)

# Remove all containers
sudo docker rm $(docker ps -aq)

# Remove image
sudo docker rmi tomcat -f
```

> ⚠️ Note: Containers depend on their image. Use `-f` to remove forcefully.

---

## 6️⃣ Container Modes

| Mode                     | Description                                                          |
| ------------------------ | -------------------------------------------------------------------- |
| **Foreground** (default) | Container logs stream to terminal; Ctrl+C stops the container.       |
| **Detached** (-d)        | Runs in background; logs not shown, use `docker logs` to view later. |
| **Interactive** (-it)    | Provides a shell inside container; useful for debugging.             |

### Examples

```bash
# Detached
sudo docker run --name mytomcat2 -p 8080:8080 -d tomcat

# Interactive
sudo docker exec -it mytomcat3 bash
```

---

## 7️⃣ Viewing Logs & Monitoring

```bash
# View logs
sudo docker logs mytomcat2

# Stream logs continuously
sudo docker logs -f mytomcat2

# Logs with timestamp
docker logs -t mytomcat2

# Tail last 20 lines
docker logs --tail=20 mytomcat2

# Live container stats
sudo docker stats

# Monitor specific containers
sudo docker stats mytomcat1 mytomcat2 mytomcat3

# Running processes inside container
sudo docker top mytomcat1
```

> 🔹 **Tip:** Container ID and Container Name can be used interchangeably in commands.

---

## 8️⃣ Quick Tips

* Always map container ports uniquely on the host.
* Use detached mode for services like Tomcat, Nginx, MySQL.
* Use interactive mode for debugging or running commands inside the container.
* Clean up unused containers/images to save disk space:

```bash
sudo docker system prune -a
```

* For production environments, consider Docker Compose for multi-container apps.

---

This guide keeps all your concepts, adds emojis/icons, structured sections, and command snippets for clarity.

---
