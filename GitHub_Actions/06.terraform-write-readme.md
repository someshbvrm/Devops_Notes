
---

# 📄 GitHub Actions Workflow: Generate Terraform Docs

> **Note:** Make sure workflow permissions are set to **Read & Write** in
> `Settings → Actions → General` for the repository.

```yaml
name: Generate Terraform Docs  # 🌟 Workflow name

# 🔔 Trigger this workflow on pull request events
on:
  pull_request:

jobs:
  docs:
    name: Render Terraform Docs 📝
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout the PR branch
      - name: Checkout PR branch
        uses: actions/checkout@v3
        with:
          ref: ${{ github.event.pull_request.head.ref }}

      # 2️⃣ Render Terraform docs and push changes back to PR
      - name: Generate Terraform Documentation
        uses: terraform-docs/gh-actions@main
        with:
          working-dir: .             # Directory containing Terraform code
          output-file: README.md     # File to inject docs into
          output-method: inject      # Inject docs into existing file
          git-push: "true"           # Push changes back to PR automatically
```

---

## ⚡ Key Points

* **`terraform-docs/gh-actions@main`**: Official GitHub Action to generate Terraform documentation.
* **`working-dir`**: Path to your Terraform configuration files.
* **`output-file`**: README or any other file to inject documentation.
* **`output-method`**:

  * `inject`: Replace content between markers in the file
  * `stdout`: Output docs to console
* **`git-push: "true"`**: Automatically pushes generated documentation back to the PR branch.
* **Permissions**: Must have **Read & Write** to allow pushing changes back.

---

💡 **Pro Tips:**

1. Add `terraform fmt` step before generating docs to ensure consistent formatting.
2. You can restrict this workflow to specific paths using `paths:` if you only want to generate docs when Terraform files change.
3. Combine this workflow with `terraform validate` or `terraform plan` in a separate job to ensure Terraform code quality before docs generation.

---
