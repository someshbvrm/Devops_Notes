
---

# üõ†Ô∏è Terraform CI/CD Troubleshooting Cheat Sheet

---

## 1Ô∏è‚É£ Setup & Initialization Errors

### Error: Unzip Not Found

```
Error: Unable to locate executable file: unzip. 
Please verify the file path exists or the file is executable.
```

**Cause:** `unzip` is not installed on the system.
**Solution:**

```bash
sudo apt update
sudo apt install unzip
```

---

### Error: Node Not Found

```
/usr/bin/env: ‚Äònode‚Äô: No such file or directory
Error: Process completed with exit code 127.
```

**Cause:** Node.js is required for Terraform providers or scripts.
**Solution:**

```bash
sudo apt update
sudo apt install nodejs
sudo ln -s /usr/bin/nodejs /usr/local/bin/node
```

---

### Error: Terraform Init Fails

```
Error: Failed to initialize provider plugins
```

**Cause:** Network issues, proxy, or missing dependencies.
**Solution:**

```bash
terraform init -upgrade
# Check network access to registry.terraform.io
```

---

## 2Ô∏è‚É£ Plan & Apply Issues

### Error: Provider Not Found

```
Error: provider registry.terraform.io/hashicorp/aws v4.50.0 not available
```

**Cause:** Incorrect provider version or missing provider installation.
**Solution:**

```bash
terraform init -upgrade
# Ensure correct provider version in terraform block:
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 4.50.0"
    }
  }
}
```

---

### Error: Insufficient Permissions

```
Error: UnauthorizedOperation: You are not authorized to perform this operation
```

**Cause:** IAM role or cloud credentials are missing/incorrect.
**Solution:**

```bash
# AWS example
export AWS_ACCESS_KEY_ID=<your-key>
export AWS_SECRET_ACCESS_KEY=<your-secret>
terraform plan
```

‚úÖ Always verify cloud credentials before running terraform.

---

### Error: Resource Already Exists

```
Error: ResourceAlreadyExists: resource X already exists
```

**Cause:** Resource created outside Terraform or Terraform state mismatch.
**Solution:**

```bash
terraform import <resource_type>.<name> <resource_id>
terraform plan
```

---

## 3Ô∏è‚É£ State & Lock Issues

### Error: Terraform Locked

```
Error: Error locking state: Error acquiring the state lock
```

**Cause:** Another terraform process is running or lock file not released.
**Solution:**

```bash
terraform force-unlock <LOCK_ID>
```

---

### Error: Lost State File

```
Error: No state file found
```

**Cause:** Local state file deleted.
**Solution:**

* If remote backend used: `terraform init` will fetch state.
* If local: restore from backup.

---

## 4Ô∏è‚É£ CI/CD Specific Errors

### Error: Terraform Docs Git Push Fails

```
Error: Permission denied
```

**Cause:** Workflow doesn‚Äôt have write permission.
**Solution:**

* Go to repo **Settings ‚Üí Actions ‚Üí General ‚Üí Workflow permissions**
* Enable **Read & write permissions**.

---

### Error: Terraform Plan in GitHub Actions

```
Error: aws provider missing credentials
```

**Cause:** GitHub Actions doesn‚Äôt have cloud credentials configured.
**Solution:**

* Use GitHub Secrets:

```yaml
env:
  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
  AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
```

---

## 5Ô∏è‚É£ Network & Connectivity Issues

### Error: Timeout / Network Unreachable

```
Error: could not reach registry.terraform.io
```

**Cause:** Firewall, proxy, or network restrictions.
**Solution:**

```bash
# For Linux:
curl https://registry.terraform.io
# Check proxy variables:
export HTTP_PROXY=http://proxy:port
export HTTPS_PROXY=https://proxy:port
```

---

## 6Ô∏è‚É£ Common Terraform Commands for Debugging

```bash
terraform validate        # Validate configuration
terraform fmt             # Format code
terraform plan            # Preview changes
terraform apply           # Apply changes
terraform destroy         # Destroy resources
terraform state list      # List resources in state
terraform state show <resource>  # Show resource details
terraform console         # Interactively query Terraform state
```

‚úÖ Enable verbose logs for debugging:

```bash
export TF_LOG=DEBUG
terraform plan
```

---

## 7Ô∏è‚É£ Tips for CI/CD Pipelines

* Always install required dependencies (`unzip`, `nodejs`, `awscli`) in the workflow runner.
* Use remote state for multi-user pipelines (S3 + DynamoDB for AWS).
* Always run `terraform fmt` and `terraform validate` before `plan`.
* Use `terraform-docs` in pipelines to auto-generate documentation.
* Store sensitive credentials in GitHub Secrets or CI/CD secret managers.

---
