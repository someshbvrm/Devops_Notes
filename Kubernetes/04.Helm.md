
---

# 🎯 Helm — The Package Manager for Kubernetes

---

## 🔹 Core Concept

Helm is a **package manager** for Kubernetes. It simplifies **deploying, upgrading, and managing** applications by packaging multiple Kubernetes manifests into a single **Chart**.

---

## 🚧 The Problem Helm Solves

Without Helm, managing Kubernetes apps means:

* 📄 Handling dozens of YAML manifests per app
* 🔄 Repeating configs for different environments
* 🐞 High chance of manual errors

✅ Helm solves this by packaging all manifests into **Charts** (versioned, reusable, shareable).

---

## ⚙️ Installation

1. Install Helm CLI on your machine / CI/CD server.
2. Helm connects to your cluster via `kubeconfig` (like `kubectl`).
3. Download latest version → [Helm GitHub Releases](https://github.com/helm/helm/releases)

---

## 🏗️ Key Components

### 📦 Helm Charts

* A **Chart** = a package containing YAML templates + configs.
* Analogy → 🍺 Homebrew formula, `apt` `.deb`, or `yum` `.rpm`.

---

### 🚀 Helm Releases

* A **Release** = running instance of a Chart.
* Same chart → multiple releases possible (`my-app-staging`, `my-app-prod`).

---

### 📚 Helm Repositories

* A **Repo** = collection of charts (like npm registry).
* Public repo: [Artifact Hub](https://artifacthub.io).

---

### ⚡ values.yaml

* Configuration file for **customizing charts**.
* Separates deployment logic (templates) from configs.
* Use same chart for **dev, staging, prod** → just change values.

---

## 🔄 Basic Workflow

```bash
helm repo add [repo-name] [url]         # Add a repo
helm install [release-name] [chart]     # Install a chart
helm upgrade [release-name] [chart]     # Upgrade a release
helm uninstall [release-name]           # Remove a release
helm list                               # List releases
```

✅ Examples:

```bash
helm install happy-panda bitnami/wordpress
helm install mytomcat stable/tomcat
helm install mytomcat1 ./tomcat   # from local chart
```

---

## 📦 Charts

Charts = **packaging format** for Helm apps.

* Can deploy **simple** (memcached pod) or **complex** (web app + DB + cache).
* Download chart without installing:

```bash
helm pull stable/tomcat
helm pull stable/mysql
```

Install from local:

```bash
helm install mydb ./MySQL
```

---

## 📂 Chart File Structure

Example: `wordpress/`

```
wordpress/
  Chart.yaml          # Info about chart (name, version, description)
  LICENSE             # (optional)
  README.md           # (optional)
  values.yaml         # Default config
  values.schema.json  # (optional) Schema for values
  charts/             # Dependencies
  crds/               # Custom Resource Definitions
  templates/          # YAML templates
  templates/NOTES.txt # (optional) Usage notes
```

---

### 📑 Chart.yaml Example

```yaml
apiVersion: v2
name: wordpress
version: 1.0.0
description: A Helm chart for WordPress
kubeVersion: ">=1.20.0"
keywords:
  - cms
  - wordpress
home: https://wordpress.org
sources:
  - https://github.com/WordPress/WordPress
maintainers:
  - name: David
    email: david@example.com
appVersion: "6.0"
```

---

### 📦 Dependencies Example

In `charts/` or `Chart.yaml`:

```yaml
dependencies:
  - name: apache
    version: 1.2.3
    repository: https://example.com/charts
  - name: mysql
    version: 3.2.1
    repository: https://another.example.com/charts
```

---

## 🛠️ Templates & Values

* Templates = written in **Go templating language** (with Sprig functions).
* `templates/` directory → YAML manifests generated from `.Values`.

📄 Example Template:

```yaml
apiVersion: v1
kind: ReplicationController
metadata:
  name: deis-database
  labels:
    app.kubernetes.io/name: deis-database
spec:
  replicas: 1
  selector:
    app.kubernetes.io/name: deis-database
  template:
    metadata:
      labels:
        app.kubernetes.io/name: deis-database
    spec:
      containers:
        - name: deis-database
          image: {{ .Values.imageRegistry }}/postgres:{{ .Values.dockerTag }}
          imagePullPolicy: {{ .Values.pullPolicy }}
          env:
            - name: DATABASE_STORAGE
              value: {{ default "minio" .Values.storage }}
```

---

### 📑 values.yaml Example

```yaml
imageRegistry: "quay.io/deis"
dockerTag: "latest"
pullPolicy: "Always"
storage: "s3"
```

Override values at install:

```bash
helm install myredis ./redis -f myvalues.yaml
helm install mytomcat --values=production.yaml stable/tomcat
```

---

## 🏷 Predefined Values

Available in every chart template:

* `.Release.Name` → release name
* `.Release.Namespace` → namespace
* `.Chart.Version` → chart version
* `.Files.Get` → get extra files
* `.Capabilities.KubeVersion` → cluster version

---

## ⚡ Helm Commands

### 📌 Create Chart

```bash
helm create mychart
```

### 📌 Lint Chart

```bash
helm lint ./foo
```

### 📌 Install Chart

```bash
helm install -f myvalues.yaml myredis ./redis
helm install --set name=prod myredis ./redis
helm install --set-file my_script=do.sh myredis ./redis
helm install --set-json 'master.sidecars=[{...}]' myredis ./redis
```

Override multiple values files:

```bash
helm install -f base.yaml -f override.yaml myredis ./redis
```

### 📌 Upgrade Chart

```bash
helm upgrade -f myvalues.yaml -f override.yaml myredis ./redis
helm upgrade --set foo=bar redis ./redis
```

### 📌 Rollback Release

```bash
helm rollback myredis 3
```

📖 Docs: [helm rollback](https://helm.sh/docs/helm/helm_rollback/)

---

## 📦 Popular Helm Charts

* 🐱 Tomcat
* 🐬 MySQL
* ⚙️ Jenkins
* 📊 Prometheus
* 🐇 RabbitMQ
* 🚀 Redis
* 🍃 MongoDB
* 🔥 Kafka
* 📈 Grafana
* 📡 ELK / Splunk

👉 Official Bitnami Charts → [GitHub Repo](https://github.com/bitnami/charts.git)

---
