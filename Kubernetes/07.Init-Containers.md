
---

# â˜¸ï¸ Kubernetes: Init Containers, Static Pods, Jobs & CronJobs

---

## ğŸŸ¢ Init Containers

ğŸ“Œ **Definition**:
An **Init Container** is a special type of container that runs **before** the main application containers in a Pod.
It **must complete successfully** before the main containers start.

ğŸ”¹ **Use Cases**:

* â³ Wait for a service/DB to be ready
* âš™ï¸ Set up configuration files
* ğŸ—„ï¸ Run DB migrations
* ğŸ”‘ Fetch secrets/configs before app runs

---

### ğŸ“ Example 1 â€“ Simple Init Container

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-with-init
spec:
  initContainers:
  - name: init-wait
    image: busybox
    command: ['sh', '-c', 'until nslookup my-service; do sleep 2; done']
  containers:
  - name: app
    image: nginx
```

---

### ğŸ“ Example 2 â€“ Multiple Init Containers

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app.kubernetes.io/name: MyApp
spec:
  containers:
  - name: myapp-container
    image: busybox:1.28
    command: ['sh', '-c', 'echo The app is running! && sleep 3600']

  initContainers:
  - name: init-myservice
    image: busybox:1.28
    command: ['sh', '-c', "until nslookup myservice.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for myservice; sleep 2; done"]

  - name: init-mydb
    image: busybox:1.28
    command: ['sh', '-c', "until nslookup mydb.$(cat /var/run/secrets/kubernetes.io/serviceaccount/namespace).svc.cluster.local; do echo waiting for mydb; sleep 2; done"]
```

---

## ğŸ”µ Static Pods

ğŸ“Œ **Definition**:
Static Pods are **managed directly by the kubelet**, not by the API server.

ğŸ”¹ **Key Points**:

* Defined via **YAML manifests** placed in `/etc/kubernetes/manifests/` ğŸ“‚
* Commonly used for **control plane components** (API server, etcd, scheduler)
* Always bound to a **specific node** (no scheduler involvement)
* API server shows them as **mirror pods** but cannot manage them
* Updating/removing manifest â†’ kubelet automatically applies the change

---

### ğŸ“ Example â€“ Static Pod

Place the file at `/etc/kubernetes/manifests/nginx.yaml`:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-static
  namespace: default
spec:
  containers:
  - name: nginx
    image: nginx
```

---

## ğŸŸ£ Jobs

ğŸ“Œ **Definition**:
A **Job** ensures that **one or more Pods run to completion**.

* âœ… Runs Pods until they finish successfully
* âš¡ Great for **batch tasks** like DB migrations, report generation, or data processing

---

## ğŸŸ  CronJobs

ğŸ“Œ **Definition**:
A **CronJob** builds on Jobs by running them **on a schedule**, just like **Linux cron**.

* ğŸ•’ Used for **recurring tasks** â†’ log cleanup, database backups, periodic reporting

---

## ğŸ”´ Static Pods vs Jobs/CronJobs

| Feature                    | Static Pods ğŸ“‚                               | Jobs âš™ï¸                     | CronJobs â³                   |
| -------------------------- | -------------------------------------------- | --------------------------- | ---------------------------- |
| **Managed by**             | Kubelet                                      | Control Plane               | Control Plane                |
| **Use Case**               | Control Plane components, node-specific pods | Run once until completion   | Run repeatedly on a schedule |
| **Manifest Location**      | `/etc/kubernetes/manifests/`                 | Applied via `kubectl` / API | Applied via `kubectl` / API  |
| **Can run as Static Pod?** | âœ… Only raw Pods                              | âŒ Jobs not supported        | âŒ CronJobs not supported     |

âš ï¸ The **kubelet does not understand Job or CronJob objects** â€” only raw Pod manifests can be static.

---
